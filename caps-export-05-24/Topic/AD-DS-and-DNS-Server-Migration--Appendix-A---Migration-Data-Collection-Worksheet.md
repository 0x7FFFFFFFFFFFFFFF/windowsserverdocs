---
title: AD DS and DNS Server Migration: Appendix A - Migration Data Collection Worksheet
ms.custom: na
ms.reviewer: na
ms.suite: na
ms.tgt_pltfrm: na
ms.assetid: b283f0ba-ef49-45bd-882a-dd61f12d5276
author: Femila
---
# AD DS and DNS Server Migration: Appendix A - Migration Data Collection Worksheet
    
## Migration data collection worksheet  
 You can use this migration data collection worksheet to collect data about your source server and help ensure that the destination server functions properly after the migration. You can use Windows commands on your source domain controller to identify the settings that are requested in the worksheet.  
  
 On the source domain controller, open a Command Prompt window: click **Start**, click **Run**, type **cmd**, and then press ENTER.  
  
### Migration data collection worksheet  
  
|\#|Source server essential settings|Setting values|  
|------|------------------------------------|------------------|  
|1|**Server name**<br /><br />At a command prompt, type the following command:  ipconfig \/all<br /><br />and then press ENTER.<br /><br />The host name of a server is the first part of the fully qualified domain name \(FQDN\). The FQDN is the full computer name, including both the host name and the primary DNS suffix, separated by dots \(.\). For example, the FQDN of a computer named “host” with a primary DNS suffix of “example.microsoft.com” is “host.example.microsoft.com”.|Computer host name: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_<br /><br />FQDN: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_|  
|2|**Operations master roles**<br /><br />Determine what operations master \(also known as flexible single master operations or FSMO\) roles are hosted on the source server. At a command prompt, type the following command:  Netdom query \/domain:\<domain\> fsmo<br /><br />and then press ENTER.<br /><br />where `<domain>` is the name of the domain. Before you begin your migration, determine which operations master roles you will assign to other computers and which roles will go to the destination server.<br /><br />For more information, see [article 324801](http://go.microsoft.com/fwlink/?LinkID=93375) in the Microsoft Knowledge Base \(http:\/\/go.microsoft.com\/fwlink\/?LinkID\=93375\).|Check all that apply \(√\)<br /><br />![](../Image/3dd4f848-9c62-4403-bfe7-52364867ea8c.gif) Schema master<br /><br />![](../Image/3dd4f848-9c62-4403-bfe7-52364867ea8c.gif) Domain naming master<br /><br />![](../Image/3dd4f848-9c62-4403-bfe7-52364867ea8c.gif) Primary domain controller \(PDC\) emulator master \(also known as PDC emulator\)<br /><br />![](../Image/3dd4f848-9c62-4403-bfe7-52364867ea8c.gif) Relative ID \(RID\) master \(also known as RID pool manager\)<br /><br />![](../Image/3dd4f848-9c62-4403-bfe7-52364867ea8c.gif) Infrastructure master|  
|3|**Server functions**<br /><br />-   Determine whether the source server is a global catalog server or a read\-only domain controller \(RODC\). At the command prompt, type the following two commands, and press ENTER after each command:<br />    Command \#1: ldifde \-s %COMPUTERNAME% \-d "" \-p base \-f DCcfg.txt<br />    Command \#2: findstr \/i "4.1920 GlobalCatalog" DCcfg.txt<br />-   The commands return exactly one or two lines of text:<br />    `supportedCapabilities: 1.2.840.113556.1.4.1920`  indicates that the source server is an RODC.<br />    `isGlobalCatalogReady: TRUE` indicates that the source server is a global catalog server.<br />    `isGlobalCatalogReady: FALSE`  indicates that the source server is not a global catalog server.<br /><br />If the source server is functioning as either of these two types of domain controllers, the destination server must function in the same way.|Check all that apply \(√\)<br /><br />![](../Image/3dd4f848-9c62-4403-bfe7-52364867ea8c.gif) Global catalog<br /><br />![](../Image/3dd4f848-9c62-4403-bfe7-52364867ea8c.gif) RODC|  
|4|**Site membership**<br /><br />Determine what site the source server is in. For more information about sites, see [Active Directory Sites and Services](http://go.microsoft.com/fwlink/?LinkId=130490) \(http:\/\/go.microsoft.com\/fwlink\/?LinkId\=130490\).At a command prompt, type the following command, and then press ENTER.  Command: nltest \/dsgetsite|Source server site: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_|  
|5|**Organizational unit**<br /><br />Determine the organizational unit \(OU\) that the source server is a member of. For more information about OUs, see [Organizational units](http://go.microsoft.com/fwlink/?LinkId=130493) \(http:\/\/go.microsoft.com\/fwlink\/?LinkId\=130493\). At a command prompt, type the following command, and then press ENTER.<br /><br />Command: reg query "HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Group Policy\\State\\Machine" &#124; find \/i "OU\="|Source server OU: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_|  
|6|**LDAP policy**<br /><br />Perform the following procedure on your source domain controller to determine if it has a Lightweight Directory Access Protocol \(LDAP\) query policy assigned. If so, make sure that the destination domain controller has the same query policy assigned.<br /><br />**To determine the LDAP query policy on a domain controller**<br />1.  Open **Active Directory Sites and Services**.<br />2.  Expand the **Sites** container.<br />3.  Expand the site object containing the domain controller.<br />4.  Expand the **Servers** container.<br />5.  Expand the server object that is named for the domain controller.<br />6.  Right\-click the **NTDS Settings** object and then click **Properties**.<br />7.  On the **General** tab, note the value in the **Query Policy** box.<br /><br />If the **Query Policy** box on the source domain controller is empty, no LDAP query policy changes are required on the destination domain controller.<br /><br />If the **Query Policy** box on the source domain controller is not empty, note the value. After the destination domain controller is promoted, perform the preceding procedure on the destination domain controller to make sure that the same query policy is assigned to it.||  
|7|**DNS information**<br /><br />Record the source TCP\/IP settings for DNS. When you record IP information, you must also record DNS client \(interface\) settings. Look for “DNS servers” information on each interface.<br /><br />Use the following command to create a text file that contains all the necessary information: IPConfig \/All \> \<filename\>.txt|Interface \#1<br /><br />-   IP address: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_<br />-   Subnet: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_<br />-   Default gateway: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_<br />-   DNS servers: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ \(list\)<br /><br />Interface \#2:<br /><br />-   IP address: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_<br />-   Subnet: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_<br />-   Default gateway: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_<br />-   DNS servers: \_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_ \(list\)|  
|8|Visually verify that the time, date, and time zone on the source server are synchronized. To view the current settings, type the following commands at a command prompt, pressing ENTER after each command:<br /><br />time \/t<br /><br />date \/t<br /><br />w32tm \/tz|![](../Image/3dd4f848-9c62-4403-bfe7-52364867ea8c.gif) Time and time zones are synchronized \(√\)|  
|9|**Group Policy**<br /><br />Determine the Group Policy objects \(GPOs\) that are applied on the source server. For more information about Group Policy, see [Windows Server Group Policy](http://go.microsoft.com/fwlink/?LinkID=75191) \(http:\/\/go.microsoft.com\/fwlink\/?LinkID\=75191\).<br /><br />Configure policy settings on the source server to be identical to the settings on the destination server. Match the source server policy settings, or determine why you should not match the policy settings on the source server and destination server.<br /><br />Code Sample: gpresult \/scope computer \>GPO.txt<br /><br />If you are running the command on Windows Server 2003, at the command prompt, type the following command, and then press ENTER:  gpresult \/scope computer \>GPO.txt<br /><br />If you are running the command on [!INCLUDE[nextref_longhorn](../Token/nextref_longhorn_md.md)] or [!INCLUDE[nextref_server_7](../Token/nextref_server_7_md.md)], at the command prompt, type the following command, and then press ENTER:  gpresult \/scope computer \/r \>GPO.txt<br /><br />Either command prints a text document that contains the GPOs that are applied on the source server.||  
  
## See Also  
 [Active Directory Domain Services and DNS Server Migration Guide](../Topic/Active-Directory-Domain-Services-and-DNS-Server-Migration-Guide.md)   
 [AD DS and DNS Server Migration: Preparing to Migrate](../Topic/AD-DS-and-DNS-Server-Migration--Preparing-to-Migrate.md)   
 [AD DS and DNS Server Migration: Migrating the AD DS and DNS Server Roles](../Topic/AD-DS-and-DNS-Server-Migration--Migrating-the-AD-DS-and-DNS-Server-Roles.md)   
 [AD DS and DNS Server Migration: Verifying the Migration](../Topic/AD-DS-and-DNS-Server-Migration--Verifying-the-Migration.md)   
 [AD DS and DNS Server Migration: Post-Migration Tasks](../Topic/AD-DS-and-DNS-Server-Migration--Post-Migration-Tasks.md)   
 [AD DS and DNS Server Migration: Appendix B - Migration Verification Worksheet](../Topic/AD-DS-and-DNS-Server-Migration--Appendix-B---Migration-Verification-Worksheet.md)   
 [AD DS and DNS Server Migration: Appendix C - Stand-Alone DNS Migration](../Topic/AD-DS-and-DNS-Server-Migration--Appendix-C---Stand-Alone-DNS-Migration.md)  
  
  