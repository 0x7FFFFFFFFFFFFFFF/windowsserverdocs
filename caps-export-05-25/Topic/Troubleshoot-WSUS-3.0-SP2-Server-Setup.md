---
title: Troubleshoot WSUS 3.0 SP2 Server Setup
ms.custom: na
ms.reviewer: na
ms.suite: na
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 526bab2a-f12c-4d6d-ade1-fbc7f482f868
author: britw
---
# Troubleshoot WSUS 3.0 SP2 Server Setup
This topic describes how to resolve issues that you might encounter when you install [!INCLUDE[wsus_firstref_30SP2](../Token/wsus_firstref_30SP2_md.md)] 3.0 SP2. To troubleshoot problems that occur in an existing WSUS 3.0 SP2 installation, see the [Troubleshoot an Existing WSUS 3.0 SP2 Installation](../Topic/Troubleshoot-an-Existing-WSUS-3.0-SP2-Installation.md) section of the [WSUS 3.0 SP2 Operations Guide](http://go.microsoft.com/fwlink/?LinkId=189716).  
  
## WSUS setup issues  
If the connection to the upstream WSUS server fails, a message displays at the bottom of the screen. For more information about why the connection failed, click the **Details** link in the message.  
  
To troubleshoot an unattended setup process, view the setup log files in the *WSUSInstallationDrive***\\Program Files\\Update Services\\LogFiles\\** folder.  
  
Following are some common issues and ideas to investigate if you are having problems setting up WSUS 3.0 SP2.  
  
#### How can I check for required software and hardware?  
See [WSUS 3.0 SP2 system requirements](assetId:///e8f62aba-4c8d-410e-9012-e3c9680a929b) for a list of requirements that must be met before you can successfully install WSUS 3.0 SP2.  
  
#### How can I check the setup logs?  
WSUS setup creates the following four log files that can help you diagnose problems with setup. These log files are located in the **%temp%** folder of the user who installed the WSUS software.  
  
-   WSUSSetup.log: The status of each of the component installations that are performed during WSUS setup is logged to this file. You can check this log to see whether any component installation failed. If you see a failure, check the corresponding log to see what went wrong during the installation of that component.  
  
-   WSUSSetupMsi\_*timestamp*.log: This log file is generated by MSI for WSUS component setup. Before it invokes custom or standard actions, Windows Installer logs that information to this file. The return values from the custom actions are also logged in this file.  
  
-   WSUSCa\_*timestamp*.log: This log file is used by custom actions. Errors that occurred while executing any custom actions in WSUS component or BITS setup are logged in this file.  
  
-   WSUSWyukonSetup\_*timestamp*.log: This is the log file for [!INCLUDE[nextref_wyukon](../Token/nextref_wyukon_md.md)] setup. All [!INCLUDE[nextref_wyukon](../Token/nextref_wyukon_md.md)] installation and uninstallation information is logged in this file.  
  
#### How can I check the .NET Framework installation?  
If the .NET Framework has not been installed correctly, WSUS setup can fail.  
  
-   One symptom of this problem is the failure to run **HideConsoleApp.exe**. Search the WSUSSetupMsi\_*timestamp*.log file for "HideConsoleApp.exe" and view the return value of the corresponding custom action. If the return value is not **0**, the executable failed to run. HideConsoleApp.exe can fail for various reasons. The MSUSCa\_*timestamp*.log file will give the specific reason it failed.  
  
-   Reinstalling the .NET Framework might solve this problem.  
  
#### Why is WSUSService.exe marked for deletion?  
WSUS installs WSUSService.exe during setup and deletes it during uninstallation. During uninstallation, if another process is using the service, the service is not deleted completely but is marked for deletion. It is deleted only after all processes have stopped using the service. If the service is not deleted properly after uninstallation, the next installation can fail because WSUSService.exe cannot be installed while it is marked for deletion.  
  
-   Look at the WSUSSetupMsi\_*timestamp*.log file for the return value of **HideConsoleApp.exe**. If the return value is not **0**, that means that the custom action running HideConsoleApp.exe failed.  
  
-   Look at the WSUSCa\_*timestamp*.log file to see whether the failure is due to the service being marked for deletion.  
  
-   Reboot the computer and rerun Setup. All the open handles to the service are closed when the computer shuts down, and this should resolve the problem.  
  
#### Why do the NetBiosDomainName and the DNS domain name need to be the same on my domain controller?  
Setup can fail because it uses the DNS domain name instead of the NetBiosDomainName when setting database permissions to the IWAM account.  
  
-   Check the NetBiosDomainName and the DNS domain name on the domain controller. These names must be identical for WSUS setup to succeed.  
  
#### Is there a problem if there are duplicate ASP.NET entries in the IIS web services list?  
The ASP.NET web service extension may occasionally be listed twice in the IIS configuration. If this is the case, WSUS setup will fail when it tries to install and configure its v\-roots.  
  
-   Check WSUSSetup.log for the following entry:  
  
```  
Error IISCustomAction Command /Install FailedSystem.ArgumentException: Item has already been added. Key in dictionary: "enableasp.net" Key being added: "enableasp.net"  
```  
  
-   Disable and then reenable the ASP.NET V2.0.50727 web service extension through the IIS user interface. Make sure that the final status of this web service extension is “Allowed.”  
  
#### Do I need to remove a SUSDB database from an earlier installation?  
Reinstallation of WSUS can fail if there is a SUSDB database from a previous WSUS installation. You will need to remove this database before restarting WSUS setup.  
  
#### Why does UseCustomWebsite fail?  
If the default Web site has been deleted and recreated, the default Web site is assigned a Web site ID other than **1** by IIS. Consequently, WSUS Setup will fail at the default Web site. There are two ways you can work around this issue:  
  
-   Reinstall IIS to ensure that the default Web site is created with a Web site index.  
  
-   WSUS Setup will still work if installed to port 8530. Check to see that **usecustomwebsite**  value is set to **On**.  
  
#### Why can I not use API compression after I install WSUS 3.0 SP2 on Windows Server 2008?  
If you want to use API compression on Windows 2008, ensure that dynamic compression IIS role service is installed. This feature is not installed in the default IIS installation on Windows Server 2008.  
  
#### Why does WSUS 3.0 SP2 setup fail to install when I use lowercase letters to name Windows Server 2008?  
SQL Server requires the name for a computer running Windows Server 2008 to be in uppercase letters. If you have used lowercase letters, the WSUS 3.0 SP2 setup will fail. Rename the computer by using all uppercase letters.  
  
